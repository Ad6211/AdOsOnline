<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pseudo OS</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #2e2e2e;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow: hidden;
    }
    /* Bureau */
    #desktop {
        width: 100%;
        height: calc(100% - 40px);
        position: relative;
        background: linear-gradient(135deg,#3b3b3b,#1e1e1e);
        overflow: hidden;
    }
    .icon {
        width: 80px;
        text-align: center;
        color: white;
        cursor: pointer;
        position: absolute;
    }
    .icon img {
        width: 64px;
        height: 64px;
    }
    /* Barre des tâches */
    #taskbar {
        height: 40px;
        width: 100%;
        background: #1a1a1a;
        color: white;
        position: absolute;
        bottom: 0;
        display: flex;
        align-items: center;
    }
    #start-btn {
        width: 80px;
        height: 100%;
        background: #0078d7;
        text-align: center;
        line-height: 40px;
        cursor: pointer;
        user-select: none;
    }
    #start-menu {
        position: absolute;
        bottom: 40px;
        left: 0;
        width: 200px;
        background: #2b2b2b;
        color: white;
        display: none;
        flex-direction: column;
        border: 1px solid #000;
    }
    #start-menu div {
        padding: 10px;
        cursor: pointer;
        border-bottom: 1px solid #444;
    }
    #start-menu div:hover {
        background: #444;
    }
    /* Fenêtre */
    .window {
        width: 300px;
        height: 200px;
        background: #f0f0f0;
        color: black;
        border: 2px solid #333;
        position: absolute;
        top: 50px;
        left: 50px;
        display: none;
        flex-direction: column;
        z-index: 10;
    }
    .window-header {
        background: #0078d7;
        color: white;
        padding: 5px;
        cursor: move;
        user-select: none;
        display: flex;
        justify-content: space-between;
    }
    .window-content {
        flex: 1;
        padding: 10px;
        overflow: auto;
    }
    .close-btn {
        cursor: pointer;
    }
    button {
        cursor: pointer;
    }
    input, textarea {
        width: 100%;
        box-sizing: border-box;
    }
</style>
</head>
<body>
<div id="desktop">
    <div class="icon" style="top:20px; left:20px;" onclick="openWindow('terminal')">
        <img src="https://img.icons8.com/ios-filled/64/ffffff/console.png"/>
        <div>Terminal</div>
    </div>
    <div class="icon" style="top:20px; left:120px;" onclick="openWindow('explorer')">
        <img src="https://img.icons8.com/ios-filled/64/ffffff/folder-invoices.png"/>
        <div>Explorer</div>
    </div>
    <div class="icon" style="top:120px; left:20px;" onclick="openWindow('calculator')">
        <img src="https://img.icons8.com/ios-filled/64/ffffff/calculator.png"/>
        <div>Calc</div>
    </div>
</div>

<div id="taskbar">
    <div id="start-btn" onclick="toggleStartMenu()">Start</div>
</div>
<div id="start-menu">
    <div onclick="openWindow('terminal')">Terminal</div>
    <div onclick="openWindow('explorer')">Explorer</div>
    <div onclick="openWindow('calculator')">Calculator</div>
</div>

<!-- Fenêtres -->
<div class="window" id="terminal">
    <div class="window-header">Terminal <span class="close-btn" onclick="closeWindow('terminal')">✖</span></div>
    <div class="window-content">
        <textarea id="terminal-text" rows="10" style="background:black;color:white;"></textarea><br>
        <input type="text" id="terminal-input" placeholder="Commande..." onkeydown="handleTerminal(event)">
    </div>
</div>

<div class="window" id="explorer">
    <div class="window-header">Explorer <span class="close-btn" onclick="closeWindow('explorer')">✖</span></div>
    <div class="window-content">
        <ul>
            <li>Documents</li>
            <li>Images</li>
            <li>Musique</li>
            <li>Vidéo</li>
        </ul>
    </div>
</div>

<div class="window" id="calculator">
    <div class="window-header">Calculator <span class="close-btn" onclick="closeWindow('calculator')">✖</span></div>
    <div class="window-content">
        <input type="text" id="calc-display" readonly><br>
        <button onclick="calcPress('1')">1</button>
        <button onclick="calcPress('2')">2</button>
        <button onclick="calcPress('3')">3</button><br>
        <button onclick="calcPress('4')">4</button>
        <button onclick="calcPress('5')">5</button>
        <button onclick="calcPress('6')">6</button><br>
        <button onclick="calcPress('7')">7</button>
        <button onclick="calcPress('8')">8</button>
        <button onclick="calcPress('9')">9</button><br>
        <button onclick="calcPress('0')">0</button>
        <button onclick="calcPress('+')">+</button>
        <button onclick="calcPress('-')">-</button><br>
        <button onclick="calcPress('*')">*</button>
        <button onclick="calcPress('/')">/</button>
        <button onclick="calcResult()">=</button>
        <button onclick="calcClear()">C</button>
    </div>
</div>

<script>
function toggleStartMenu(){
    let menu = document.getElementById('start-menu');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
}

function openWindow(id){
    let w = document.getElementById(id);
    w.style.display = 'flex';
    w.style.zIndex = 10;
}

function closeWindow(id){
    document.getElementById(id).style.display = 'none';
}

/* Terminal */
function handleTerminal(e){
    if(e.key === 'Enter'){
        let input = document.getElementById('terminal-input');
        let text = document.getElementById('terminal-text');
        text.value += '> ' + input.value + '\n';
        if(input.value === 'help') text.value += 'Commandes: help, clear\n';
        else if(input.value === 'clear') text.value = '';
        else text.value += 'Commande inconnue\n';
        input.value = '';
        text.scrollTop = text.scrollHeight;
    }
}

/* Calculator */
let calcValue = '';
function calcPress(val){ calcValue += val; document.getElementById('calc-display').value = calcValue;}
function calcResult(){ try {calcValue = eval(calcValue).toString(); document.getElementById('calc-display').value = calcValue;} catch(e){document.getElementById('calc-display').value='Error'; calcValue='';}}
function calcClear(){ calcValue=''; document.getElementById('calc-display').value='';}

/* Draggable windows */
let dragged = null;
let offsetX = 0;
let offsetY = 0;
document.querySelectorAll('.window-header').forEach(header=>{
    header.addEventListener('mousedown', function(e){
        dragged = header.parentElement;
        offsetX = e.clientX - dragged.offsetLeft;
        offsetY = e.clientY - dragged.offsetTop;
    });
});
document.addEventListener('mousemove', function(e){
    if(dragged){
        dragged.style.left = (e.clientX - offsetX) + 'px';
        dragged.style.top = (e.clientY - offsetY) + 'px';
    }
});
document.addEventListener('mouseup', ()=>{dragged=null;});
</script>
</body>
</html>
